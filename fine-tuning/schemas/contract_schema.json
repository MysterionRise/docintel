{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://docintel.dev/schemas/contract_schema.json",
  "title": "Contract Analysis Schema",
  "description": "Schema for structured extraction from contract documents. Used for data generation and validation in DocIntel fine-tuning.",
  "type": "object",
  "required": ["document_type", "parties", "key_clauses", "summary"],
  "properties": {
    "document_type": {
      "type": "string",
      "enum": ["NDA", "MSA", "SaaS", "Employment", "Lease", "Other"],
      "description": "The type of contract being analyzed."
    },
    "parties": {
      "type": "array",
      "description": "The parties involved in the contract.",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["name", "role"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Full legal name of the party."
          },
          "role": {
            "type": "string",
            "enum": ["party_a", "party_b", "third_party"],
            "description": "Role of the party in the contract."
          }
        },
        "additionalProperties": false
      }
    },
    "effective_date": {
      "type": "string",
      "description": "The date the contract becomes effective. ISO 8601 format (YYYY-MM-DD) preferred."
    },
    "expiration_date": {
      "type": "string",
      "description": "The date the contract expires or terminates. ISO 8601 format (YYYY-MM-DD) preferred."
    },
    "key_clauses": {
      "type": "array",
      "description": "Important clauses extracted from the contract with risk assessment.",
      "items": {
        "type": "object",
        "required": ["clause_type", "text", "risk_level"],
        "properties": {
          "clause_type": {
            "type": "string",
            "enum": [
              "limitation_of_liability",
              "indemnification",
              "termination",
              "non_compete",
              "confidentiality",
              "ip_ownership",
              "governing_law",
              "dispute_resolution",
              "payment_terms",
              "auto_renewal"
            ],
            "description": "The category of the contract clause."
          },
          "text": {
            "type": "string",
            "description": "The verbatim or closely paraphrased text of the clause."
          },
          "page": {
            "type": "integer",
            "minimum": 0,
            "description": "Page number where the clause appears (0-indexed)."
          },
          "risk_level": {
            "type": "string",
            "enum": ["high", "medium", "low"],
            "description": "Assessed risk level of the clause."
          },
          "risk_reason": {
            "type": "string",
            "description": "Explanation of why this risk level was assigned."
          }
        },
        "additionalProperties": false
      }
    },
    "obligations": {
      "type": "array",
      "description": "Contractual obligations for each party.",
      "items": {
        "type": "object",
        "required": ["party", "obligation"],
        "properties": {
          "party": {
            "type": "string",
            "description": "Name of the party bearing the obligation."
          },
          "obligation": {
            "type": "string",
            "description": "Description of the obligation."
          },
          "deadline": {
            "type": "string",
            "description": "Deadline for fulfilling the obligation. ISO 8601 format (YYYY-MM-DD) or descriptive text."
          }
        },
        "additionalProperties": false
      }
    },
    "summary": {
      "type": "string",
      "description": "A concise natural-language summary of the contract covering its purpose, key terms, and notable risks."
    }
  },
  "additionalProperties": false
}
