{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://docintel.dev/schemas/financial_schema.json",
  "title": "Financial Document Schema",
  "description": "Schema for structured extraction from financial documents. Used for data generation and validation in DocIntel fine-tuning.",
  "type": "object",
  "required": ["document_type", "total", "currency", "summary"],
  "properties": {
    "document_type": {
      "type": "string",
      "enum": ["invoice", "bank_statement", "tax_form", "financial_statement", "receipt"],
      "description": "The type of financial document being analyzed."
    },
    "issuer": {
      "type": "string",
      "description": "Name of the entity that issued the document."
    },
    "recipient": {
      "type": "string",
      "description": "Name of the entity receiving the document."
    },
    "date": {
      "type": "string",
      "description": "Primary date of the document. ISO 8601 format (YYYY-MM-DD) preferred."
    },
    "line_items": {
      "type": "array",
      "description": "Individual line items or transactions in the document.",
      "items": {
        "type": "object",
        "required": ["description", "total"],
        "properties": {
          "description": {
            "type": "string",
            "description": "Description of the line item or transaction."
          },
          "quantity": {
            "type": "number",
            "minimum": 0,
            "description": "Quantity of units."
          },
          "unit_price": {
            "type": "number",
            "minimum": 0,
            "description": "Price per unit."
          },
          "total": {
            "type": "number",
            "description": "Total amount for this line item."
          }
        },
        "additionalProperties": false
      }
    },
    "subtotal": {
      "type": "number",
      "description": "Sum of all line items before tax."
    },
    "tax": {
      "type": "number",
      "minimum": 0,
      "description": "Total tax amount."
    },
    "total": {
      "type": "number",
      "description": "Final total amount including tax."
    },
    "currency": {
      "type": "string",
      "description": "ISO 4217 currency code (e.g. 'USD', 'EUR', 'GBP').",
      "pattern": "^[A-Z]{3}$"
    },
    "account_numbers": {
      "type": "array",
      "description": "Account numbers referenced in the document (masked if sensitive).",
      "items": {
        "type": "string"
      }
    },
    "tax_ids": {
      "type": "array",
      "description": "Tax identification numbers referenced in the document (masked if sensitive).",
      "items": {
        "type": "string"
      }
    },
    "payment_terms": {
      "type": "string",
      "description": "Payment terms specified in the document (e.g. 'Net 30', 'Due on receipt')."
    },
    "due_date": {
      "type": "string",
      "description": "Payment due date. ISO 8601 format (YYYY-MM-DD) preferred."
    },
    "summary": {
      "type": "string",
      "description": "A concise summary of the financial document covering key amounts, parties, and terms."
    }
  },
  "additionalProperties": false
}
